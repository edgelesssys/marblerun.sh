<!doctype html><html><head><title>CLI</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://marblerun.sh/docs/getting-started/cli/><link rel=stylesheet href=https://marblerun.sh/scss/bootstrap.min.462c371c7334fb8be9e57eb1edffd6d85726378c54b9e9c7135419c4a0a7f0b9.css emotion=ðŸ¤©><script defer src=https://use.fontawesome.com/releases/v5.10.2/js/all.js></script><script async defer src=https://buttons.github.io/buttons.js></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta property="og:title" content="Marblerun - The control plane for confidential computing"><meta property="og:description" content="Marblerun makes it easy to deploy, scale, and verify your SGX-based apps on vanilla Kubernetes. Think Istio/Consul/Linkerd for confidential computing.â€‹"><meta property="og:image" content="https://www.marblerun.sh/img/social.png"><meta name=twitter:title content="Marblerun - The control plane for confidential computing"><meta name=twitter:description content="Marblerun makes it easy to deploy, scale, and verify your SGX-based apps on vanilla Kubernetes."><meta name=twitter:image content="https://www.marblerun.sh/img/social.png"><meta name=twitter:card content="Marblerun"></head><body><nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top container-fluid"><a class=navbar-brand href=/><img src=/img/logo.png width=140px></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/docs/introduction/><i class="fas fa-book"></i>&nbsp;Docs</a></li><li class=nav-item><a class=nav-link href=/community><i class="fas fa-comments"></i>&nbsp;Community</a></li><li class=nav-item><a class=nav-link href=https://github.com/edgelesssys/marblerun><i class="fab fa-github"></i>&nbsp;GitHub</a></li><li class=nav-item><a href=/docs/getting-started/quickstart class="nav-link btn btn-primary ml-3">Get started â†’</a></li></ul></div></nav><div class="container my-3"><div class=row><div class="col-12 col-lg-3"><div class=docsSidebar><h1 class=my-3>Docs</h1><div class=mb-3><a href=/docs/introduction/ class=d-block><h6>Introduction</h6></a></div><div class=mb-3><h6 class=cursor-pointer data-toggle=collapse data-target=#collapse1>Getting Started</h6><div class="collapse show" id=collapse1><a href=/docs/getting-started/quickstart/ class=d-block>Quickstart</a>
<a href=/docs/getting-started/concepts/ class=d-block>Concepts</a>
<a href=/docs/getting-started/coordinator/ class=d-block>Coordinator</a>
<a href=/docs/getting-started/marbles/ class=d-block>Marbles</a>
<a href=/docs/getting-started/cli/ class="d-block text-primary">> CLI</a></div></div><div class=mb-3><h6 class=cursor-pointer data-toggle=collapse data-target=#collapse2>Features</h6><div class=collapse id=collapse2><a href=/docs/features/attestation/ class=d-block>Attestation</a>
<a href=/docs/features/recovery/ class=d-block>Recovery</a>
<a href=/docs/features/secrets-management/ class=d-block>Secrets management</a>
<a href=/docs/features/auto-injection/ class=d-block>Kubernetes integration</a>
<a href=/docs/features/runtimes/ class=d-block>Supported runtimes</a>
<a href=/docs/features/planned-features/ class=d-block>Planned features</a></div></div><div class=mb-3><h6 class=cursor-pointer data-toggle=collapse data-target=#collapse3>Deployment</h6><div class=collapse id=collapse3><a href=/docs/deployment/cloud/ class=d-block>Cloud</a>
<a href=/docs/deployment/on-prem/ class=d-block>On-premises</a>
<a href=/docs/deployment/kubernetes/ class=d-block>Kubernetes</a>
<a href=/docs/deployment/standalone/ class=d-block>Standalone</a></div></div><div class=mb-3><h6 class=cursor-pointer data-toggle=collapse data-target=#collapse4>Core workflows</h6><div class=collapse id=collapse4><a href=/docs/workflows/define-manifest/ class=d-block>Defining a Manifest</a>
<a href=/docs/workflows/set-manifest/ class=d-block>Setting a Manifest</a>
<a href=/docs/workflows/add-service/ class=d-block>Adding a service</a>
<a href=/docs/workflows/verification/ class=d-block>Verifying a deployment</a></div></div><div class=mb-3><h6 class=cursor-pointer data-toggle=collapse data-target=#collapse5>Additional workflows</h6><div class=collapse id=collapse5><a href=/docs/additional-workflows/monitoring/ class=d-block>Monitoring and logging</a>
<a href=/docs/additional-workflows/update-manifest/ class=d-block>Updating a Manifest</a>
<a href=/docs/additional-workflows/updates/ class=d-block>Updating a deployment</a>
<a href=/docs/additional-workflows/recover-coordinator/ class=d-block>Recovering the Coordinator</a></div></div><div class=mb-3><h6 class=cursor-pointer data-toggle=collapse data-target=#collapse6>Building services</h6><div class=collapse id=collapse6><a href=/docs/building-services/ego/ class=d-block>EGo</a>
<a href=/docs/building-services/graphene/ class=d-block>Graphene</a>
<a href=/docs/building-services/occlum/ class=d-block>Occlum</a></div></div><div class=mb-3><h6 class=cursor-pointer data-toggle=collapse data-target=#collapse7>Examples</h6><div class=collapse id=collapse7><a href=/docs/examples/helloworld/ class=d-block>Hello world</a>
<a href=/docs/examples/emojivoto/ class=d-block>Emoji voting</a>
<a href=/docs/examples/graphene/ class=d-block>Graphene-based examples</a>
<a href=/docs/examples/occlum/ class=d-block>Occlum-based examples</a></div></div><div class=mb-3><a href=/docs/changelog/ class=d-block><h6>Changelog</h6></a></div></div></div><div class="col-12 col-lg-9"><article><h1 id=command-line-interface-cli>Command Line Interface (CLI)</h1><p>We provide a command-line interface (CLI) for Marblerun.
This CLI allows you to install Marblerun on your cluster and interacts with the control plane through the Client API for all administrative tasks in the service mesh.</p><p>To install the Marblerun CLI on your machine you can use our pre-built binaries.</p><h3 id=for-the-current-user>For the current user</h3><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>wget -P ~/.local/bin https://github.com/edgelesssys/marblerun/releases/latest/download/marblerun
chmod +x ~/.local/bin/marblerun
</code></pre></div><h3 id=global-install-requires-root>Global install (requires root)</h3><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo wget -O /usr/local/bin/marblerun https://github.com/edgelesssys/marblerun/releases/latest/download/marblerun
sudo chmod +x /usr/local/bin/marblerun
</code></pre></div><p>To build the Marblerun CLI, <a href=https://github.com/edgelesssys/edgelessrt>Edgeless RT</a> needs to be installed on your machine.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go build -o marblerun github.com/edgelesssys/marblerun/cli
</code></pre></div><p>To list all available commands, either run <code>marblerun</code> with no commands or execute <code>marblerun help</code>
The output is the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Usage:
  marblerun <span style=color:#555>[</span>command<span style=color:#555>]</span>

Available Commands:
  certificate      Retrieves the certificate of the Marblerun coordinator
  check            Check the status of Marbleruns control plane
  completion       Output script <span style=color:#069;font-weight:700>for</span> specified shell to <span style=color:#366>enable</span> autocompletion
  graphene-prepare Modifies a Graphene manifest <span style=color:#069;font-weight:700>for</span> use with Marblerun
  <span style=color:#366>help</span>             Help about any <span style=color:#366>command</span>
  install          Installs marblerun on a kubernetes cluster
  manifest         Manages manifest <span style=color:#069;font-weight:700>for</span> the Marblerun coordinator
  namespace        Manages namespaces associated with Marblerun installations
  precheck         Check <span style=color:#069;font-weight:700>if</span> your kubernetes cluster supports SGX
  recover          Recovers the Marblerun coordinator from a sealed state
  status           Gives information about the status of the marblerun Coordinator
  uninstall        Removes Marblerun from a kubernetes cluster
  version          Display version of this CLI and <span style=color:#555>(</span><span style=color:#069;font-weight:700>if</span> running<span style=color:#555>)</span> the Marblerun coordinator

Flags:
  -h, --help   <span style=color:#366>help</span> <span style=color:#069;font-weight:700>for</span> marblerun

Use <span style=color:#c30>&#34;marblerun [command] --help&#34;</span> <span style=color:#069;font-weight:700>for</span> more information about a command.
</code></pre></div><h2 id=command-certificate>Command <code>certificate</code></h2><p>Get the root and/or intermediate certificates of the Marblerun coordinator.</p><p><strong>Flags</strong>
These flags apply to all <code>certificate</code> subcommands</p><table class="table table-striped table-bordered"><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;era-config</td><td></td><td>Path to remote attestation config file in json format, if none provided the newest configuration will be loaded from github</td></tr><tr><td>&ndash;help, -h</td><td></td><td>help for certificate</td></tr><tr><td>&ndash;insecure, -i</td><td></td><td>simulation mode</td></tr><tr><td>&ndash;output, -o</td><td></td><td>File to save the certificate to</td></tr></tbody></table><ul><li><h3 id=root><code>root</code></h3><p>Gets the root certificate of the Marblerun coordinator.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun certificate root &lt;IP:PORT&gt; <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div></li><li><h3 id=intermediate><code>intermediate</code></h3><p>Gets the intermediate certificate of the Marblerun coordinator.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun certificate intermediate &lt;IP:PORT&gt; <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div></li><li><h3 id=chain><code>chain</code></h3><p>Gets the certificate chain of the Marblerun coordinator.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun certificate chain &lt;IP:PORT&gt; <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div></li></ul><h2 id=command-check>Command <code>check</code></h2><p>Check the status of Marbleruns control plane.
This command will check if the Marblerun coordinator and/or the Marblerun webhook are deployed on a Kubernetes cluster and wait until all replicas of the deployment have the <code>available</code> status.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun check
</code></pre></div><p><strong>Flags</strong></p><table class="table table-striped table-bordered"><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;timeout</td><td>60</td><td>Time to wait before aborting in seconds</td></tr></tbody></table><h2 id=command-completion>Command <code>completion</code></h2><p>Generate a shell script to enable autocompletion for <code>marblerun</code> commands.
Supported shells are:</p><ul><li><p><code>bash</code>:</p><ul><li>To enable completion run:<div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#366>source</span> &lt;<span style=color:#555>(</span>marblerun completion bash<span style=color:#555>)</span>
</code></pre></div></li></ul></li><li><p><code>zsh</code>:</p><ul><li>If completion is not already enabled you need to enable it first:<div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#366>echo</span> <span style=color:#c30>&#34;autoload -U compinit; compinit&#34;</span> &gt;&gt; ~/.zshrc
</code></pre></div></li><li>Enable completion for <code>marblerun</code>:<div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun completion zsh &gt; <span style=color:#c30>&#34;</span><span style=color:#a00>${</span><span style=color:#033>fpath</span>[1]<span style=color:#a00>}</span><span style=color:#c30>/_marblerun&#34;</span>
</code></pre></div></li></ul></li></ul><p>Once enabled, command completion is just one key press away:<br><code>marblerun ma</code>+Tab completes to:<br><code>marblerun manifest</code></p><h2 id=command-graphene-prepare>Command <code>graphene-prepare</code></h2><p>This command helps you if you want to add Graphene-based services to your Marblerun service mesh.
It prepares your Graphene project to be used as a Marble by replacing the original entrypoint of your application with the bootstrapping Marble premain process which eventually spawns your application.
Given your <a href=https://graphene.readthedocs.io/en/latest/manifest-syntax.html>Graphene manifest template</a>, it will suggest the required adjustments needed and adds our bootstrapping data-plane code to your Graphene image.
See <a href=https://marblerun.sh/docs/building-services/graphene/>Building a service: Graphene</a> for detailed information on Marblerunâ€™s Graphene integration and our changes in your Graphene manifest.</p><p>Please note that this only works on a best-effort basis and may not instantly work correctly.
While suggestions should be made for every valid TOML Graphene configuration, changes can only be performed for non-hierarchically sorted configurations. as the official Graphene examples.
The unmodified manifest is saved as a backup under the old path with an added &ldquo;.bak&rdquo; suffix, allowing you to try out and roll back any changes performed.</p><p>Remember, you need to create a <a href=https://marblerun.sh/docs/workflows/define-manifest/>Marblerun manifest</a> in addition to the Graphene manifest. Adding Graphene packages to your manifest is straightforward and follows the same principles as any other SGX enclave. If you configured the arguments to your Graphene application through the <a href=https://graphene.readthedocs.io/en/latest/manifest-syntax.html#command-line-arguments>Graphene manifest</a> before, you need to transfer those to the <a href=https://marblerun.sh/docs/workflows/define-manifest/#manifestmarbles>Marblerun manifest</a>.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun graphene-prepare &lt;path&gt;
</code></pre></div><p><strong>Examples</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun graphene-prepare nginx.manifest.template
</code></pre></div><p>Output:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Reading file: nginx.manifest.template

Marblerun suggests the following changes to your Graphene manifest:
libos.entrypoint <span style=color:#555>=</span> <span style=color:#c30>&#34;file:premain-graphene&#34;</span>
loader.argv0_override <span style=color:#555>=</span> <span style=color:#c30>&#34;</span><span style=color:#069;font-weight:700>$(</span>INSTALL_DIR<span style=color:#069;font-weight:700>)</span><span style=color:#c30>/sbin/nginx&#34;</span>
loader.insecure__use_host_env <span style=color:#555>=</span> <span style=color:#f60>1</span>
sgx.allowed_files.marblerun_uuid <span style=color:#555>=</span> <span style=color:#c30>&#34;file:uuid&#34;</span>
sgx.enclave_size <span style=color:#555>=</span> <span style=color:#c30>&#34;1024M&#34;</span>
sgx.remote_attestation <span style=color:#555>=</span> <span style=color:#f60>1</span>
sgx.thread_num <span style=color:#555>=</span> <span style=color:#f60>16</span>
sgx.trusted_files.marblerun_premain <span style=color:#555>=</span> <span style=color:#c30>&#34;file:premain-graphene&#34;</span>
Do you want to automatically apply the suggested changes <span style=color:#555>[</span>y/n<span style=color:#555>]</span>? y
Applying changes...
Saving original manifest as nginx.manifest.template.bak...
Saving changes to nginx.manifest.template...
Downloading Marblerun premain from GitHub...
Successfully downloaded premain-graphene.

Done! You should be good to go <span style=color:#069;font-weight:700>for</span> Marblerun!
</code></pre></div><h2 id=command-install>Command <code>install</code></h2><p>Install Marblerun on your Kubernetes cluster.
This command will add Marblerun to your local helm repository if it is not present yet, optionally you can provide a path to your own helm chart.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun install <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div><p><strong>Flags</strong></p><table class="table table-striped table-bordered"><thead><tr><th style=text-align:left>Name, shorthand</th><th style=text-align:left>Default</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>&ndash;client-server-port</td><td style=text-align:left>4433</td><td style=text-align:left>Set the client server port. Needs to be configured to the same port as in your client tool stack</td></tr><tr><td style=text-align:left>&ndash;disable-auto-injection</td><td style=text-align:left></td><td style=text-align:left>Disable automatic injection of selected namespaces</td></tr><tr><td style=text-align:left>&ndash;domain</td><td style=text-align:left>localhost</td><td style=text-align:left>Sets the CNAME for the coordinator certificate</td></tr><tr><td style=text-align:left>&ndash;help, -h</td><td style=text-align:left></td><td style=text-align:left>help for install</td></tr><tr><td style=text-align:left>&ndash;marblerun-chart-path</td><td style=text-align:left></td><td style=text-align:left>Path to marblerun helm chart</td></tr><tr><td style=text-align:left>&ndash;mesh-sever-port</td><td style=text-align:left>2001</td><td style=text-align:left>Set the mesh server port. Needs to be configured to the same port as in the data-plane marbles</td></tr><tr><td style=text-align:left>&ndash;resource-key</td><td style=text-align:left>sgx.intel.com/epc</td><td style=text-align:left>Resource providing SGX, different depending on used device plugin. Use this to set tolerations/resources if your device plugin is not supported by marblerun</td></tr><tr><td style=text-align:left>&ndash;simulation</td><td style=text-align:left></td><td style=text-align:left>Set Marblerun to start in simulation mode, needed when not running on an SGX enabled cluster</td></tr><tr><td style=text-align:left>&ndash;version</td><td style=text-align:left></td><td style=text-align:left>Version of the Coordinator to install, latest by default</td></tr></tbody></table><p><strong>Examples</strong></p><ul><li><p>Install Marblerun on a cluster with SGX Support</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun install --domain<span style=color:#555>=</span>mycluster.uksouth.cloudapp.azure.com
</code></pre></div><p>The output is similar to the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Did not find marblerun helm repository on system, adding now...
edgeless has been added to your helm repositories
Setting up Marblerun Webhook... Done
Marblerun installed successfully
</code></pre></div></li><li><p>Install Marblerun on a cluster without SGX Support (simulation mode)</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun install --simulation
</code></pre></div><p>The output is similar to the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Setting up Marblerun Webhook... Done
Marblerun installed successfully
</code></pre></div></li></ul><h2 id=command-manifest>Command <code>manifest</code></h2><p>Set or update a manifest, or retrieve the signature of the manifest in place.</p><p><strong>Flags</strong>
These flags apply to all sub commands of manifest</p><table class="table table-striped table-bordered"><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;era-config</td><td></td><td>Path to remote attestation config file in json format, if none provided the newest configuration will be loaded from github</td></tr><tr><td>&ndash;help, -h</td><td></td><td>help for manifest</td></tr><tr><td>&ndash;insecure, -i</td><td></td><td>simulation mode</td></tr></tbody></table><ul><li><h3 id=set><code>set</code></h3><p>Uploads a manifest in json or yaml format to the Marblerun coordinator.
If a recovery key was set in the manifest, a recovery secret will be sent back.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun manifest <span style=color:#366>set</span> &lt;manifest.json&gt; &lt;IP:PORT&gt; <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div><p><strong>Flags</strong></p><table class="table table-striped table-bordered"><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;recovery-data, -r</td><td></td><td>File to write recovery data to, print to stdout if not set</td></tr></tbody></table><p><strong>Examples</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun manifest <span style=color:#366>set</span> manifest.json <span style=color:#033>$MARBLERUN</span> --recovery-data<span style=color:#555>=</span>recovery-secret.json --era-config<span style=color:#555>=</span>era.json
</code></pre></div><p>The output is similar to the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Successfully verified coordinator, now uploading manifest
Manifest successfully set, recovery data saved to: recovery-secret.json
</code></pre></div></li><li><h3 id=update><code>update</code></h3><p>Update a manifest by uploading an update manifest to the Marblerun coordinator.
The original manifest has to define one or multiple Admins who are allowed to update the manifest.
For more information see <a href=https://marblerun.sh/docs/additional-workflows/update-manifest/>Update</a></p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun manifest update &lt;manifest.json&gt; &lt;IP:PORT&gt; --cert<span style=color:#555>=</span>admin-cert.pem --key<span style=color:#555>=</span>admin-key.pem <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div><p><strong>Flags</strong></p><table class="table table-striped table-bordered"><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;cert, -c</td><td></td><td>PEM encoded admin certificate file (required)</td></tr><tr><td>&ndash;key, -k</td><td></td><td>PEM encoded admin key file (required)</td></tr></tbody></table><p><strong>Examples</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun manifest update update-manifest.json <span style=color:#033>$MARBLERUN</span> --cert<span style=color:#555>=</span>admin-cert.pem --key<span style=color:#555>=</span>admin-key.pem --era-config<span style=color:#555>=</span>era.json
</code></pre></div><p>The output is the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Successfully verified coordinator, now uploading manifest
Manifest successfully updated
</code></pre></div></li><li><h3 id=get><code>get</code></h3><p>Retrieves the signature of an uploaded manifest. This allows a user to verify what manifest is running on the coordinator.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun manifest get &lt;IP:PORT&gt; <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div><p><strong>Flags</strong></p><table class="table table-striped table-bordered"><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;output, -o</td><td>signature.json</td><td>Define file to write to</td></tr></tbody></table><p><strong>Examples</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun manifest get <span style=color:#033>$MARBLERUN</span> --output<span style=color:#555>=</span>manifest-signature.json --era-config<span style=color:#555>=</span>era.json
</code></pre></div><p>The output is the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Successfully verified coordinator, now requesting manifest signature
Manifest written to: manifest-signature.json
</code></pre></div></li><li><h3 id=signature><code>signature</code></h3><p>Print the signature of a Marblerun manifest.
The manifest can be in either json or yaml format.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun manifest signature manifest.json
</code></pre></div><p>The output is the sha256 hash in base64 encoding of the manifest as it would be interpreted by the Marblerun coordinator.
Note, that Internally, the coordinator handles the manifest in JSON format. Hence, the signature is always based on the JSON format of your manifest.
You can quickly verify the integrity of the installed manifest by comparing the output of <code>marblerun manifest signature</code> on your local version and the signature returned by <code>marblerun manifest get</code> of the coordinator&rsquo;s version.</p></li></ul><h2 id=command-namespace>Command <code>namespace</code></h2><p>Add namespaces to Marblerun.
If the auto-injection feature is enabled. All new pods in those namespaces will get their Marblerun configuration automatically injected.</p><ul><li><h3 id=add><code>add</code></h3><p>Add a namespace to the Marblerun mesh by creating a new label</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun namespace add NAMESPACE ... <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div><p><strong>Flags</strong></p><table class="table table-striped table-bordered"><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;inject-sgx</td><td></td><td>Set to enable automatic injection of SGX tolerations for namespace</td></tr></tbody></table><p><strong>Examples</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun namespace add default testspace
</code></pre></div><p>The output is the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Added namespace <span style=color:#555>[</span>default<span style=color:#555>]</span> to Marblerun mesh
Added namespace <span style=color:#555>[</span>testspace<span style=color:#555>]</span> to Marblerun mesh
</code></pre></div></li><li><h3 id=remove><code>remove</code></h3><p>Remove a namespace from the Marblerun mesh</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun namespace remove NAMESPACE <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div><p><strong>Examples</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun namespace remove default
</code></pre></div><p>The output is the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Namespace <span style=color:#555>[</span>default<span style=color:#555>]</span> successfully removed from the Marblerun mesh
</code></pre></div></li><li><h3 id=list><code>list</code></h3><p>List all namespaces currently associated with the Marblerun mesh</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun namespace list
</code></pre></div><p><strong>Examples</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun namespace list
</code></pre></div><p>The output is the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>testspace
</code></pre></div></li></ul><h2 id=command-precheck>Command <code>precheck</code></h2><p>Check if your kubernetes cluster supports SGX.
More precisely the command will check if any nodes in the cluster define SGX resources through the use of <a href=https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/>Device Plugins</a>.
Currently supported are:</p><ul><li><p><a href=https://intel.github.io/intel-device-plugins-for-kubernetes/cmd/sgx_plugin/README.html>Intel SGX Device Plugin</a>, exposing the resources:</p><ul><li><code>sgx.intel.com/enclave</code></li><li><code>sgx.intel.com/epc</code></li><li><code>sgx.intel.com/provision</code></li></ul></li><li><p><a href=https://docs.microsoft.com/en-us/azure/confidential-computing/confidential-nodes-aks-overview#azure-device-plugin-for-intel-sgx->Azure SGX Device Plugin</a>, exposing the resource:</p><ul><li><code>kubernetes.azure.com/sgx_epc_mem_in_MiB</code></li></ul></li></ul><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun precheck
</code></pre></div><ul><li>If your cluster does not support SGX the output is the following:</li></ul><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Cluster does not support SGX, you may still run Marblerun in simulation mode
To install Marblerun run <span style=color:#555>[</span>marblerun install --simulation<span style=color:#555>]</span>
</code></pre></div><ul><li>If you cluster does support SGX the output is similar to the following</li></ul><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Cluster supports SGX on <span style=color:#f60>2</span> nodes
To install Marblerun run <span style=color:#555>[</span>marblerun install<span style=color:#555>]</span>
</code></pre></div><h2 id=command-recover>Command <code>recover</code></h2><p>Recover the Marblerun coordinator from a sealed state by uploading a recovery key.
For more information about coordinator recovery see <a href=https://marblerun.sh/docs/additional-workflows/recover-coordinator/>Recovery</a></p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun recover &lt;recovery_key_decrypted&gt; &lt;IP:PORT&gt; <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div><p><strong>Flags</strong></p><table class="table table-striped table-bordered"><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;era-config</td><td></td><td>Path to remote attestation config file in json format, if none provided the newest configuration will be loaded from github</td></tr><tr><td>&ndash;help, -h</td><td></td><td>help for recover</td></tr><tr><td>&ndash;insecure, -i</td><td></td><td>Set to skip quote verification, needed when running in simulation mode</td></tr></tbody></table><p><strong>Examples</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun recover <span style=color:#033>$MARBLERUN</span> recovery_key_decrypted --era-config<span style=color:#555>=</span>era.json
</code></pre></div><p>The output is similar to the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Successfully verified coordinator, now uploading key
Successfully uploaded recovery key and unsealed the Marblerun coordinator
</code></pre></div><h2 id=command-status>Command <code>status</code></h2><p>Checks on the current status of the coordinator.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun status &lt;IP:PORT&gt; <span style=color:#555>[</span>flags<span style=color:#555>]</span>
</code></pre></div><p><strong>Flags</strong></p><table class="table table-striped table-bordered"><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;era-config</td><td></td><td>Path to remote attestation config file in json format, if none provided the newest configuration will be loaded from github</td></tr><tr><td>&ndash;help, -h</td><td></td><td>help for status</td></tr><tr><td>&ndash;insecure, -i</td><td></td><td>Set to skip quote verification, needed when running in simulation mode</td></tr></tbody></table><p><strong>Examples</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun status <span style=color:#033>$MARBLERUN</span>
</code></pre></div><p>The output is similar to the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>No era config file specified, getting latest config from github.com/edgelesssys/marblerun/releases/latest/download/coordinator-era.json
Got latest config
2: Coordinator is ready to accept a manifest.
</code></pre></div><h2 id=command-uninstall>Command <code>uninstall</code></h2><p>Remove Marblerun from your kubernetes cluster.
This command will remove all resources added by the installation command.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun uninstall
</code></pre></div><p>The output is the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Marblerun successfully removed from your cluster
</code></pre></div><h2 id=command-version>Command <code>version</code></h2><p>Display version information of CLI, and the Marblerun coordinator running on a Kubernetes cluster.</p><p><strong>Usage</strong></p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>marblerun version
</code></pre></div><p>The output is similar to the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>CLI Version: v0.3.0
Commit: 689787ea6f3ea3e047a68e2d4deaf095d1d84db9
Coordinator Version: v0.3.0
</code></pre></div></article></div></div></div><footer class="bg-light text-center p-3"><div>Marblerun is brought to you by <a target=_blank href=https://edgeless.systems/>Edgeless Systems GmbH <img src=/img/ES_Symbol_black.svg class="verticle-align-middle ml-2" alt="Edgeless Systems GmbH Logo" width=14px class=mb-3></a></div></footer><script src=https://code.jquery.com/jquery-3.5.1.slim.min.js integrity=sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js integrity=sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx crossorigin=anonymous></script><script src=/js/main.js></script></body></html>