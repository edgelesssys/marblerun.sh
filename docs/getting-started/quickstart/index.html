<!DOCTYPE html>
<html>

<head>
	<title>Quickstart</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="canonical" href="https://marblerun.sh/docs/getting-started/quickstart/" />
	
	<link rel="stylesheet" href="https://marblerun.sh/scss/bootstrap.min.05e88624b497548722fef3538d7efdf80b0045261b068a51fbcf9b25d5fa5298.css" emotion="ðŸ¤©">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>



<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top container-fluid">
  <a class="navbar-brand" href="/">
    <img src="/img/logo.png" width="140px">
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link " href="/docs/introduction/"><i
            class="fa fa-book"></i> Docs</a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="/community"><i
            class="fa fa-commenting"></i>
          Community</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#"> <i class="fa fa-github"></i> Github</a>
      </li>
      <li class="nav-item">
        <a href="#0" class="nav-link btn btn-primary ml-3">Get Started â†’</a>
      </li>
    </ul>
  </div>
</nav>

<div class="container my-3">
  <div class="mb-3">
    <div id="breadcrumbs">
  <a href="/">Home</a>
  
  
  
  
  / <a href="/docs">Docs</a>
  
  
  
  / <a href="/getting-started">Getting started</a>
  
  
  
  / <a href="/quickstart">Quickstart</a>
  
  
  
  
</div>
  </div>
  <h1 class="my-3">Docs</h1>
  <div class="row">
    <div class="col-12 col-lg-3">
      <div class="docsSidebar">
  
  
  
  <div class="mb-3">
    
    <a href="https://marblerun.sh/docs/introduction/" class="d-block">Introduction</a>
    
  </div>
  
  <div class="mb-3">
    
    <h6>Getting Started</h6>
    
    <a href="https://marblerun.sh/docs/getting-started/quickstart/" class="d-block pl-3">Quickstart</a>
    
    <a href="https://marblerun.sh/docs/getting-started/confidential-computing/" class="d-block pl-3">Confidential Computing</a>
    
    <a href="https://marblerun.sh/docs/getting-started/service-mesh/" class="d-block pl-3">Service Mesh</a>
    
    <a href="https://marblerun.sh/docs/getting-started/overview/" class="d-block pl-3">Overview</a>
    
    
  </div>
  
  <div class="mb-3">
    
    <h6>Features</h6>
    
    <a href="https://marblerun.sh/docs/features/attestation/" class="d-block pl-3">Attestation</a>
    
    <a href="https://marblerun.sh/docs/features/recovery/" class="d-block pl-3">Recovery</a>
    
    <a href="https://marblerun.sh/docs/features/secrets-management/" class="d-block pl-3">Secrets management</a>
    
    <a href="https://marblerun.sh/docs/features/planned-features/" class="d-block pl-3">Planned features</a>
    
    
  </div>
  
  <div class="mb-3">
    
    <h6>Tasks</h6>
    
    <a href="https://marblerun.sh/docs/tasks/deploy/" class="d-block pl-3">Deploy Marblerun to your cluster</a>
    
    <a href="https://marblerun.sh/docs/tasks/set-manifest/" class="d-block pl-3">Setting a Manifest</a>
    
    <a href="https://marblerun.sh/docs/tasks/add-service/" class="d-block pl-3">Adding a Service</a>
    
    <a href="https://marblerun.sh/docs/tasks/verification/" class="d-block pl-3">Client-Side verification</a>
    
    <a href="https://marblerun.sh/docs/tasks/updates/" class="d-block pl-3">Deployment updates</a>
    
    <a href="https://marblerun.sh/docs/tasks/monitoring/" class="d-block pl-3">Monitoring and logging</a>
    
    
  </div>
  
  <div class="mb-3">
    
    <h6>Examples</h6>
    
    <a href="https://marblerun.sh/docs/examples/helloworld/" class="d-block pl-3">Hello World</a>
    
    <a href="https://marblerun.sh/docs/examples/emojivoto/" class="d-block pl-3">Confidential Emoji Voting</a>
    
    
  </div>
  
  <div class="mb-3">
    
    <a href="https://marblerun.sh/docs/changelog/" class="d-block">Changelog</a>
    
  </div>
  
  
  
</div>
    </div>
    <div class="col-12 col-lg-9">
      <article>
        <h1 id="quickstart">Quickstart</h1>
<h2 id="step-0-setup">Step 0: Setup</h2>
<p>Set up a Kubernetes cluster and install <code>kubectl</code>. One easy way to get started is to run Kubernetes on your local machine using <a href="https://kubernetes.io/docs/tasks/tools/install-minikube/">Minikube</a>.</p>
<p>Please also install <a href="https://helm.sh/docs/intro/install/">Helm</a> (&ldquo;the package manager for Kubernetes&rdquo;).</p>
<h2 id="step-1-install-the-coordinator-onto-the-cluster">Step 1: Install the Coordinator onto the cluster</h2>
<p>Add the Edgeless Systems chart repository to Helm.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helm repo add edgeless https://helm.edgeless.systems
helm repo update
</code></pre></div><p>Install Marblerun&rsquo;s Coordinator using Helm.
Update the hostname with your cluster&rsquo;s FQDN or use localhost for local testing.</p>
<ul>
<li>
<p>For a cluster with SGX support:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helm install marblerun-coordinator edgeless/marblerun-coordinator <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --create-namespace <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -n marblerun <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --set global.pullSecret<span style="color:#f92672">=</span>regcred <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --set coordinator.hostname<span style="color:#f92672">=</span>mycluster.uksouth.cloudapp.azure.com
</code></pre></div></li>
<li>
<p>For a cluster without SGX support:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helm install marblerun-coordinator edgeless/marblerun-coordinator <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --create-namespace <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -n marblerun <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --set coordinator.resources<span style="color:#f92672">=</span>null <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --set coordinator.simulation<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --set tolerations<span style="color:#f92672">=</span>null <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --set global.pullSecret<span style="color:#f92672">=</span>regcred <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --set coordinator.hostname<span style="color:#f92672">=</span>mycluster.uksouth.cloudapp.azure.com
</code></pre></div></li>
</ul>
<h2 id="step-2-pull-the-demo-application">Step 2: Pull the demo application</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/edgelesssys/emojivoto.git <span style="color:#f92672">&amp;&amp;</span> cd emojivoto
</code></pre></div><h2 id="step-3-initialize-and-verify-the-coordinator">Step 3: Initialize and verify the Coordinator</h2>
<ol>
<li>
<p>Pull the remote attestation configuration</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wget https://github.com/edgelesssys/marblerun/releases/latest/download/coordinator-era.json
</code></pre></div></li>
<li>
<p>Get the Coordinator&rsquo;s address and set the DNS</p>
<ul>
<li>
<p>If you&rsquo;re running on AKS:</p>
<ul>
<li>
<p>Check our docs on <a href="TODO">how to set the DNS for the Client-API</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export MARBLERUN<span style="color:#f92672">=</span>mycluster.uksouth.cloudapp.azure.com
</code></pre></div></li>
</ul>
</li>
<li>
<p>If you&rsquo;re running on minikube</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl -n marblerun port-forward svc/coordinator-client-api 25555:25555 --address localhost &gt;/dev/null &amp;
export MARBLERUN<span style="color:#f92672">=</span>localhost:25555
</code></pre></div></li>
</ul>
</li>
<li>
<p>Install the Edgeless Remote Attestation Tool</p>
<ol>
<li>Check <a href="https://github.com/edgelesssys/era#requirements">requirements</a></li>
<li>See <a href="https://github.com/edgelesssys/era#install">install</a></li>
</ol>
</li>
<li>
<p>Verify the Quote and get the Coordinator&rsquo;s Root-Certificate</p>
<ul>
<li>
<p>If you&rsquo;re running on a cluster with nodes that support SGX1+FLC</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">era -c coordinator-era.json -h $MARBLERUN -o marblerun.crt
</code></pre></div></li>
<li>
<p>Otherwise</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">era -skip-quote -c coordinator-era.json -h $MARBLERUN -o marblerun.crt
</code></pre></div></li>
</ul>
</li>
</ol>
<h2 id="step-4-set-the-manifest">Step 4: Set the Manifest</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl --silent --cacert marblerun.crt -X POST -H  <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> --data-binary @tools/manifest.json <span style="color:#e6db74">&#34;https://</span>$MARBLERUN<span style="color:#e6db74">/manifest&#34;</span>
</code></pre></div><h2 id="step-5-deploy-the-demo-application">Step 5: Deploy the demo application</h2>
<ul>
<li>
<p>If you&rsquo;re deploying on a cluster with nodes that support SGX1+FLC (e.g. AKS or minikube + Azure Standard_DC*s)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helm install -f ./kubernetes/sgx_values.yaml emojivoto ./kubernetes -n emojivoto
</code></pre></div></li>
<li>
<p>Otherwise</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helm install -f ./kubernetes/nosgx_values.yaml emojivoto ./kubernetes -n emojivoto
</code></pre></div></li>
</ul>
<h2 id="step-6-watch-it-run">Step 6: Watch it run</h2>
<ul>
<li>
<p>If you&rsquo;re running on AKS</p>
<ul>
<li>You need to expose the <code>web-svc</code> in the <code>emojivoto</code> namespace. This works similar to <a href="TODO">how we expose the client-API</a></li>
<li>Get the public IP with: <code>kubectl -n emojivoto get svc web-svc -o wide</code></li>
<li>If you&rsquo;re using ingress/gateway-controllers make sure you enable <a href="TODO">SNI-passthrough</a></li>
</ul>
</li>
<li>
<p>If you&rsquo;re running on minikube</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo kubectl -n emojivoto port-forward svc/web-svc 443:443 --address 0.0.0.0
</code></pre></div></li>
<li>
<p>Install Marblerun-Certificate in your browser</p>
<ul>
<li><strong>Warning</strong> Be careful when adding certificates to your browser. We only do this temporarily for the sake of this demo. Make sure you don&rsquo;t use your browser for other activities in the meanwhile and remove the certificate afterward.</li>
<li>Chrome:
<ul>
<li>Go to <a href="chrome://settings/security">chrome://settings/security</a></li>
<li>Go to <code>&quot;Manage certificates&quot; &gt; &quot;Import...&quot;</code></li>
<li>Follow the &ldquo;Certificate Import Wizard&rdquo; and import the <code>marblerun.crt</code> of the previous step as a &ldquo;Personal&rdquo; certificate</li>
</ul>
</li>
<li>Firefox:
<ul>
<li>Go to <code>Tools &gt; Options &gt; Advanced &gt; Certificates: View Certificates</code></li>
<li>Go to <code>Import...</code> and select the <code>marblerun.crt</code> of the previous step</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Browse to <a href="https://localhost">https://localhost</a> or https://your-clusters-fqdn:25555 depending on your type of deployment.</p>
</li>
<li>
<p>Notes on DNS: If your running emojivoto on a remote machine you can add the machine&rsquo;s DNS name to the emojivoto certificate (e.g. <code>emojivoto.example.org</code>):</p>
<ul>
<li>
<p>Open the <code>kubernetes/sgx_values.yaml</code> or <code>kubernetes/nosgx_values.yaml</code> file depending on your type of deployment</p>
</li>
<li>
<p>Add your DNS name to the <code>hosts</code> field:</p>
<ul>
<li><code>hosts: &quot;emojivoto.example.org,localhost,web-svc,web-svc.emojivoto,web-svc.emojivoto.svc.cluster.local&quot;</code></li>
</ul>
</li>
<li>
<p>You need to apply your changes with:</p>
<ul>
<li>
<p>If your using <code>kubernetes/sgx_values.yaml</code> for your deployment:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helm upgrade -f ./kubernetes/sgx_values.yaml emojivoto ./kubernetes -n emojivoto
</code></pre></div></li>
<li>
<p>Otherwise:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helm upgrade -f ./kubernetes/nosgx_values.yaml emojivoto ./kubernetes -n emojivoto
</code></pre></div></li>
</ul>
</li>
</ul>
</li>
</ul>

      </article>
    </div>
  </div>
</div>

<footer class="bg-light text-center p-3">

	<div>Marblerun is brought to you by <a target="_blank" href="https://edgeless.systems/">Edgeless Systems GmbH <img
				src="/img/ES_Symbol_black.svg" class="verticle-align-middle ml-2" alt="Edgeless Systems GmbH Logo" width="14px"
				class="mb-3"></a>
	</div>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
	integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script src="/js/main.js"></script>
</body>

</html>