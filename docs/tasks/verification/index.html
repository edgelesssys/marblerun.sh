<!DOCTYPE html>
<html>

<head>
	<title>Client-Side verification</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="canonical" href="https://marblerun.sh/docs/tasks/verification/" />
	
	<link rel="stylesheet" href="https://marblerun.sh/scss/bootstrap.min.05e88624b497548722fef3538d7efdf80b0045261b068a51fbcf9b25d5fa5298.css" emotion="ðŸ¤©">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">



<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top container-fluid">
  <a class="navbar-brand" href="/">
    <img src="/img/logo.png" width="140px">
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link " href="/docs/introduction/"><i
            class="fa fa-book"></i> Docs</a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="/community"><i
            class="fa fa-commenting"></i>
          Community</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#"> <i class="fa fa-github"></i> Github</a>
      </li>
      <li class="nav-item">
        <a href="#0" class="nav-link btn btn-primary ml-3">Get Started â†’</a>
      </li>
    </ul>
  </div>
</nav>

<div class="container my-3">
  <div class="mb-3">
    <div id="breadcrumbs">
  <a href="/">Home</a>
  
  
  
  
  / <a href="/docs">Docs</a>
  
  
  
  / <a href="/tasks">Tasks</a>
  
  
  
  / <a href="/verification">Verification</a>
  
  
  
  
</div>
  </div>
  <h1 class="my-3">Docs</h1>
  <div class="row">
    <div class="col-12 col-lg-3">
      <div class="docsSidebar">
  
  
  
  <div class="mb-3">
    
    <a href="https://marblerun.sh/docs/introduction/" class="d-block">Introduction</a>
    
  </div>
  
  <div class="mb-3">
    
    <h6>Getting Started</h6>
    
    <a href="https://marblerun.sh/docs/getting-started/quickstart/" class="d-block pl-3">Quickstart</a>
    
    <a href="https://marblerun.sh/docs/getting-started/confidential-computing/" class="d-block pl-3">Confidential Computing</a>
    
    <a href="https://marblerun.sh/docs/getting-started/service-mesh/" class="d-block pl-3">Service Mesh</a>
    
    <a href="https://marblerun.sh/docs/getting-started/overview/" class="d-block pl-3">Overview</a>
    
    
  </div>
  
  <div class="mb-3">
    
    <h6>Features</h6>
    
    <a href="https://marblerun.sh/docs/features/attestation/" class="d-block pl-3">Attestation</a>
    
    <a href="https://marblerun.sh/docs/features/recovery/" class="d-block pl-3">Recovery</a>
    
    <a href="https://marblerun.sh/docs/features/secrets-management/" class="d-block pl-3">Secrets management</a>
    
    <a href="https://marblerun.sh/docs/features/planned-features/" class="d-block pl-3">Planned features</a>
    
    
  </div>
  
  <div class="mb-3">
    
    <h6>Tasks</h6>
    
    <a href="https://marblerun.sh/docs/tasks/deploy/" class="d-block pl-3">Deploy Marblerun to your cluster</a>
    
    <a href="https://marblerun.sh/docs/tasks/set-manifest/" class="d-block pl-3">Setting a Manifest</a>
    
    <a href="https://marblerun.sh/docs/tasks/add-service/" class="d-block pl-3">Adding a Service</a>
    
    <a href="https://marblerun.sh/docs/tasks/verification/" class="d-block pl-3">Client-Side verification</a>
    
    <a href="https://marblerun.sh/docs/tasks/updates/" class="d-block pl-3">Deployment updates</a>
    
    <a href="https://marblerun.sh/docs/tasks/monitoring/" class="d-block pl-3">Monitoring and logging</a>
    
    
  </div>
  
  <div class="mb-3">
    
    <h6>Examples</h6>
    
    <a href="https://marblerun.sh/docs/examples/helloworld/" class="d-block pl-3">Hello World</a>
    
    <a href="https://marblerun.sh/docs/examples/emojivoto/" class="d-block pl-3">Confidential Emoji Voting</a>
    
    
  </div>
  
  <div class="mb-3">
    
    <a href="https://marblerun.sh/docs/changelog/" class="d-block">Changelog</a>
    
  </div>
  
  
  
</div>
    </div>
    <div class="col-12 col-lg-9">
      <article>
        <h1 id="client-side-verification">Client-side verification</h1>
<p>An important feature of Marblerun is providing the ability to verifying the confidentiality and integrity of the whole application on the client-side.
To that end, we provide a simple REST-API that clients can use before interacting with the application.</p>
<h2 id="establishing-trust">Establishing trust</h2>
<p>The first step is to establish trust with the whole microservice mesh.
Therefore, Marblerun exposes the <code>/quote</code> endpoint that returns a quote and a root certificate for the whole mesh.
Verifying the quote can be done manually, but to ease the process we provide the Edgeless Remote Attestation tools (<a href="https://github.com/edgelesssys/era">era</a>) for this purpose:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># If you have EdgelessRT installed</span>
go install github.com/edgelesssys/era/cmd/era
<span style="color:#75715e"># Or use the binary release</span>
wget -O .local/bin/era https://github.com/edgelesssys/era/releases/latest/download/era
<span style="color:#75715e"># Run era</span>
era -c coordinator-era.json -h $MARBLERUN -o marblerun.crt
</code></pre></div><p>era requires the Coordinator&rsquo;s UniqueID and SignerID (or MRENCLAVE and MRSIGNER in SGX terms) to verify the quote.
In production, these would be generated when building Coordinator and distributed to your clients.
For testing, we have published a Coordinator image at <code>ghcr.io/edgelesssys/coordinator</code>.
You can pull the corresponding <code>coordinator-era.json</code> file from our release page:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">    wget https://github.com/edgelesssys/marblerun/releases/latest/download/coordinator-era.json
</code></pre></div><p>After successful verification, you&rsquo;ll have the trusted root certificate <code>marblerun.crt</code> to use with your application.</p>
<h2 id="verifing-the-manifest">Verifing the Manifest</h2>
<p>Establishing trust with the service mesh allows you to verify the deployed Manifest in the second step.
To that end, Marblerun exposes the endpoint <code>/manifest</code>.
Using curl you can get the Manifest&rsquo;s signature aka its sha256 hash:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl --cacert marblerun.crt <span style="color:#e6db74">&#34;https://</span>$MARBLERUN<span style="color:#e6db74">/manifest&#34;</span> | jq <span style="color:#e6db74">&#39;.ManifestSignature&#39;</span> --raw-output
</code></pre></div><p>Compare this against your local version of the Manifest:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sha256sum manifest.json
</code></pre></div>
      </article>
    </div>
  </div>
</div>

<footer class="bg-light text-center p-3">

	<div>Marblerun is brought to you by <a target="_blank" href="https://edgeless.systems/">Edgeless Systems GmbH <img
				src="/img/ES_Symbol_black.svg" class="verticle-align-middle ml-2" alt="Edgeless Systems GmbH Logo" width="14px"
				class="mb-3"></a>
	</div>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
	integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script src="/js/main.js"></script>
</body>

</html>